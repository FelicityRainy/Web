<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
	<title>Document</title>
</head>
<body>
	<div id="main" style="position: relative;">
		<input type="button" name="" class="btn" value="button" style="position:absolute;wideth:200px;height:100px">
	</div>
	<script>
// 	window.onload=mDown;
	
// 	function mDown(){
// 		var btn=document.getElementsByClassName("btn")[0];		
// 		btn.onmousedown=fnDown;
// }


// function fnDown(e){
// 	         e = event || window.event;
// 	         var btn=document.getElementsByClassName("btn")[0];		
// 			 disL=e.clientX-btn.offsetLeft;
// 			 disH=e.clientY-btn.offsetTop;
// 			 //用于找落点的位置

//             document.onmousemove=function(event) {
//                 event = event || window.event; 
//                 fnMove(event,disL,disH);
//             }
//            	document.onmouseup=function(){
//   			document.onmousemove=null;
//   			document.onmouseup=null;
//   }
// 	}


// function  fnMove(e,posX,posY){
// 	var btn=document.getElementsByClassName("btn")[0];
// 				var	l=e.clientX-posX;
// 				var	t=e.clientY-posY;//光标移动落点
// 				var winW=document.documentElement.clientWidth;
// 				var winH=document.documentElement.clientHeight;
// 				var maxW=winW-btn.offsetWidth;
// 				var maxH=winH-btn.offsetHeight;
// 				if(l<0){
// 					l=0;
// 				}else if(l>maxW){
// 	    			l=maxW;
// 	  			}
// 	 			 if(t<0){
// 	    			t=0;
// 	  			}else if(t>maxH){
// 	   				t=maxH;
// 	  			}
	  			
// 	  			btn.style.left=l+'px';
// 	  			btn.style.top=t+'px';
				
// }

    //拖曳效果
    
		// function fnDown(){
		// 	document.onmousemove=function(event){
		// 		event=event||window.event;
		// 		btn.style.left=event.clientX+"px";
		// 		btn.style.top=event.clientY+"px";
		// 	}
		// }
window.onload=fnDown;
function fnDown(){
	var btn=document.getElementsByClassName("btn")[0];
	btn.addEventListener("mousedown",fnDray,false);
	function fnDray(){
		e=event||window.event;
		var disL=e.clientX-btn.offsetLeft;
		 var disH=e.clientY-btn.offsetTop;

		document.addEventListener("mousemove",fnDray2,false);
		function fnDray2(){
			e=event||window.event;
			var winW=document.documentElement.clientWidth;
			var winH=document.documentElement.clientHeight;
			var maxW=winW-btn.offsetWidth;
			var maxH=winH-btn.offsetHeight;
			var posX=e.clientX-disL;
			var posY=e.clientY-disH;
			
			if(posX<0) {
				posX=0;
			}
			else if(posX>maxW){
				posX=maxW;
			}
			if(posY<0) {
				posY=0;
			}
			else if(posY>maxH) {
				posY=maxH;
			}
			btn.style.left=posX+"px";
			btn.style.top=posY+"px";
		}    
		 btn.addEventListener("mouseup",function(){
    	document.removeEventListener("mousemove",fnDray2,false);

    	},false);
	}
	  
}
	</script>
}
</body>
</html>

